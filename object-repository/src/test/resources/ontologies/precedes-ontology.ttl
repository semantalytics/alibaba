@prefix msg  :<http://www.openrdf.org/rdf/2011/messaging#>.
@prefix owl  :<http://www.w3.org/2002/07/owl#>.
@prefix rdfs :<http://www.w3.org/2000/01/rdf-schema#>.
@prefix rdf  :<http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix xsd  :<http://www.w3.org/2001/XMLSchema#>.

@prefix :<urn:test:precedes#>.

:hello rdfs:subClassOf msg:Message;
  rdfs:subClassOf [owl:onProperty msg:target;
    owl:allValuesFrom :Greeter];
  rdfs:subClassOf [owl:onProperty msg:literal;
    owl:allValuesFrom xsd:string].

:hello-john owl:intersectionOf(:hello [owl:onProperty msg:target; owl:hasValue :john]);
  msg:precedes :world;
  msg:precedes :wide;
  msg:script "return 'john'".

# FIXME this should be inferred
:john a :Greeter .

:wide owl:intersectionOf(:hello);
  msg:script "return 'wide world'".

:world owl:intersectionOf(:hello);
  msg:precedes :wide;
  msg:script "return 'world'".

:hello-jim owl:intersectionOf(:hello [owl:onProperty msg:target; owl:hasValue :jim]);
  msg:precedes :world;
  msg:precedes :wide;
  msg:script "return proceed() + ' jim'".

# FIXME this should be inferred
:jim a :Greeter .

