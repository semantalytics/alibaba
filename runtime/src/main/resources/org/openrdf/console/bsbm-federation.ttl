#
# Sesame configuration template for three federated repositories
#
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix rep: <http://www.openrdf.org/config/repository#>.
@prefix sr: <http://www.openrdf.org/config/repository/sail#>.
@prefix sail: <http://www.openrdf.org/config/sail#>.
@prefix sparql: <http://www.openrdf.org/config/repository/sparql#>.
@prefix fed: <http://www.openrdf.org/config/sail/federation#>.
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix rev: <http://purl.org/stuff/rev#> .
@prefix bsbm: <http://www4.wiwiss.fu-berlin.de/bizer/bsbm/v01/vocabulary/> .
@prefix bsbm-inst: <http://www4.wiwiss.fu-berlin.de/bizer/bsbm/v01/instances/> .


[] a rep:Repository ;
   rep:repositoryID "{%Repository ID|federation%}" ;
   rdfs:label "{%Repository title|Federation%}" ;
   rep:repositoryImpl [
      rep:repositoryType "openrdf:SailRepository" ;
      sr:sailImpl [
         sail:sailType "openrdf:Federation" ;
         fed:distinct true ;
         fed:localPropertySpace rdf: ;
         fed:localPropertySpace rdfs: ;
         fed:localPropertySpace foaf: ;
         fed:localPropertySpace dc: ;
         fed:localPropertySpace rev: ;
         fed:localPropertySpace bsbm: ;

         fed:member [
            rep:repositoryType "openrdf:SPARQLRepository" ;
            sparql:endpoint <{%SPARQL producers end-point|http://localhost:8080/openrdf-sesame/repositories/producers%}> ;
            sparql:subjectSpace bsbm: ;
            sparql:subjectSpace bsbm-inst:Product ;
            sparql:subjectSpace bsbm-inst:dataFromProducer
         ];

         fed:member [
            rep:repositoryType "openrdf:SPARQLRepository" ;
            sparql:endpoint <{%SPARQL vendors end-point|http://localhost:8080/openrdf-sesame/repositories/vendors%}> ;
            sparql:subjectSpace bsbm-inst:dataFromVendor
         ];

         fed:member [
            rep:repositoryType "openrdf:SPARQLRepository" ;
            sparql:endpoint <{%SPARQL ratings end-point|http://localhost:8080/openrdf-sesame/repositories/ratings%}> ;
            sparql:subjectSpace bsbm-inst:dataFromRatingSite
         ]

      ]
   ].
